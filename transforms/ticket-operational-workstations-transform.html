<link rel="import" href="../../../bower_components/polymer/polymer.html">

<dom-module id="ticket-operational-workstations">
  <template>
    <style>
      :host {
        display: inline;
      }

    </style>
    Окна: [[transform(labels)]]
  </template>
  <script>
    Polymer({
      is: 'ticket-operational-workstations',
      properties: {
        labels: {
          type: Boolean
        }
      },
      transform(raw_labels) {
        let decs = _.filter(raw_labels, l => parseInt(l, 10) == l);
        let rest = _.filter(raw_labels, l => parseInt(l, 10) != l);

        let labels = _.map(decs, l => parseInt(l, 10)).sort((a, b) => a - b);

        let first = labels[0];
        let prev = labels[0];
        let result = [];
        _.forEach(labels, (label, index) => {

          if (prev + 1 < label) {
            if (first != prev) {
              result.push(first + '-' + prev);
            } else {
              result.push(first);
            }
            first = label;
          }
          prev = label;

          if (index == labels.length - 1) {
            if (first != prev) {
              result.push(first + '-' + prev);
            } else {
              result.push(first);
            }
            first = label;
          }

        });

        return _.concat(result, rest).join(', ');
      }
    });
  </script>
</dom-module>
